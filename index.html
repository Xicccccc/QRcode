<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Professional Digital ID</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="Style.css">
</head>

<body>
  <!-- Intro Screen -->
  <div class="intro-screen" id="introScreen">
    <div class="intro-content">
      <img src="CAMSI.png" alt="Company Logo" class="intro-logo">
      <h1>Good day!</h1>
      <p>This is my contact details</p>
    </div>
  </div>

  <main class="profile-wrapper">
    <section class="profile-card">
      <!-- Header -->
      <header class="profile-header">
        <h1>Click Aces Marketing Solutions Incorporated</h1>
        <div class="avatar-container">
          <img src="IMAHE.jpeg" alt="Profile Photo" class="avatar">
        </div>
        <h1>Erick Yosorez Villafuerte</h1>
        <span class="role">HR Specialist</span>
      </header>

      <!-- Contact Info -->
      <section class="profile-section">
        <h2>Contact Information</h2>
        <div class="info-row"><span>Mobile</span><a href="tel:09633621187">0963-362-1187</a></div>
        <div class="info-row"><span>Email</span><a href="mailto:eyv.addleman@gmail.com">eyv.addleman@gmail.com</a></div>
        <div class="info-row"><span>Facebook</span><a href="https://www.facebook.com/erick.villafuerte.790">Erick Yosorez Villafuerte</a></div>
      </section>

      <!-- Unlock Government IDs -->
      <div class="button-row">
        <button class="SaveContacts pin-btn" onclick="openPinModal()">Unlock Government IDs</button>
      </div>

      <!-- Government IDs -->
      <section class="profile-section sensitive locked" id="govSection">
        <h2>Government IDs</h2>
        <div class="info-row"><span>SSS</span><span>3462641350</span></div>
        <div class="info-row"><span>TIN</span><span>397420677000</span></div>
        <div class="info-row"><span>PhilHealth</span><span>210254192952</span></div>
        <div class="info-row"><span>Pag-IBIG</span><span>121182442001</span></div>
      </section>

      <!-- Action Buttons -->
      <div class="button-row">
        <button class="SaveContacts" onclick="saveContact(this)">
          <span class="btn-text">Save Contacts</span>
          <span class="btn-check">✓</span>
        </button>
        <button class="SaveContacts note" onclick="saveAsNote()">
          <span class="btn-text">Save as Note</span>
        </button>
      </div>

    </section>
  </main>

  <!-- PIN Modal -->
  <div class="pin-overlay" id="pinOverlay">
    <div class="pin-modal">
      <h3>Enter 4-Digit PIN</h3>
      <input type="password" maxlength="4" inputmode="numeric" class="pin-input" id="pinInput" placeholder="••••"/>
      <p class="pin-error" id="pinError">Incorrect PIN</p>
      <button class="SaveContacts" onclick="verifyPin()">Unlock</button>
      <button class="pin-cancel" onclick="closePinModal()">Cancel</button>
    </div>
  </div>

<script>
const CORRECT_PIN = "1234";
let attempts = 0;
const MAX_ATTEMPTS = 5;

// Sticky header
const header = document.querySelector(".profile-header");
window.addEventListener("scroll", () => {
  header.classList.toggle("is-sticky", window.scrollY > 10);
});

// Remove intro screen
setTimeout(() => document.getElementById("introScreen")?.remove(), 3500);

// Open PIN modal
function openPinModal() {
  const pinOverlay = document.getElementById("pinOverlay");
  const pinInput = document.getElementById("pinInput");
  const pinError = document.getElementById("pinError");

  pinOverlay.style.display = "flex";
  pinInput.value = "";
  pinError.style.display = "none";
  pinError.classList.remove("locked");
  pinInput.disabled = false;
  pinInput.focus();
}

// Close PIN modal
function closePinModal() {
  document.getElementById("pinOverlay").style.display = "none";
}

// Verify PIN
function verifyPin() {
  const input = document.getElementById("pinInput");
  const error = document.getElementById("pinError");
  const modal = document.querySelector(".pin-modal");

  if (attempts >= MAX_ATTEMPTS) {
    error.textContent = "Too many attempts. Access locked.";
    error.classList.add("locked");
    error.style.display = "block";
    input.disabled = true;
    return;
  }

  if (input.value === CORRECT_PIN) {
    const govSection = document.getElementById("govSection");
    govSection.classList.remove("locked");
    govSection.classList.add("unlocked");

    // Unlock animation
    govSection.style.animation = "none";
    void govSection.offsetWidth;
    govSection.style.animation = "unlockSuccess 0.6s ease forwards";
    govSection.classList.add("gov-glow");
    setTimeout(() => govSection.classList.remove("gov-glow"), 1000);

    // Hide unlock button
    const pinButton = document.querySelector(".pin-btn");
    if (pinButton) pinButton.style.display = "none";

    // Show unlock message
    showGovMessage("Government IDs are now visible");

    closePinModal();
    attempts = 0;
  } else {
    attempts++;
    error.textContent = `Incorrect PIN. Try again (${MAX_ATTEMPTS - attempts} left)`;
    error.style.display = "block";

    modal.classList.remove("shake");
    void modal.offsetWidth;
    modal.classList.add("shake");

    input.value = "";
    input.focus();
  }
}

// Centered unlock message
function showGovMessage(message) {
  const msg = document.createElement("div");
  msg.className = "gov-message";
  msg.textContent = message;

  document.body.appendChild(msg);

  msg.style.opacity = 0;
  msg.style.transform = "translate(-50%, -50%) scale(0.8)";
  requestAnimationFrame(() => {
    msg.style.opacity = 1;
    msg.style.transform = "translate(-50%, -50%) scale(1)";
  });

  setTimeout(() => {
    msg.style.opacity = 0;
    msg.style.transform = "translate(-50%, -50%) scale(0.8)";
    setTimeout(() => msg.remove(), 400);
  }, 2000);
}

// Save contact as VCF
function saveContact(button) {
  if (button.classList.contains("saved")) return;

  const vCard = `
BEGIN:VCARD
VERSION:3.0
N:Villafuerte;Erick Yosorez;;;
FN:Erick Yosorez Villafuerte
TITLE:HR Specialist
TEL;TYPE=CELL:09633621187
EMAIL:eyv.addleman@gmail.com
END:VCARD
`.trim();

  const blob = new Blob([vCard], { type: "text/vcard;charset=utf-8" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "Erick_Villafuerte.vcf";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  button.classList.add("saved");
  button.querySelector(".btn-text").textContent = "Saved to Contacts";
}

// Save as Note
function saveAsNote() {
  const noteText = `
Erick Yosorez Villafuerte
HR Specialist
Mobile: 0963-362-1187
Email: eyv.addleman@gmail.com

SSS: 3462641350
TIN: 397420677000
PhilHealth: 210254192952
Pag-IBIG: 121182442001
`.trim();

  const blob = new Blob([noteText], { type: "text/plain" });
  const file = new File([blob], "Contact_Info.txt", { type: "text/plain" });

  if (navigator.share) {
    navigator.share({
      title: "Contact Information",
      text: noteText,
      files: [file]
    }).catch(() => {});
  } else {
    const textarea = document.createElement("textarea");
    textarea.value = noteText;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand("copy");
    document.body.removeChild(textarea);
    alert("Copied. Paste into Notes.");
  }
}
</script>
</body>
</html>
